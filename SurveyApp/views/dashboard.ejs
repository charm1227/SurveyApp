<!DOCTYPE html>
<html lang="en">
<head>
    <title>Survey App | Dashboard</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <a href="/logout">Logout</a>
    
    <div class="grid-container">
        <div class="grid-item">
            <h1><u>My Surveys</u></h1>

            <!-- My surveys -->
            <% data.mySurveys.forEach(survey => { %>
                <div class="survey surveyControls">
                    <label class="surveyCode"><%= survey.code %></label>
                    <label><%= survey.name %></label>
                    <input class="buttonIcon" onclick="window.location.href = '/editSurvey/<%= survey.code %>';" type="image" src="icons/edit.png" alt="edit" name="edit icon">
                    <input class="buttonIcon" onclick="window.location.href = '/publishSurvey/<%= survey.code %>';" type="image" src="icons/rocket.png" alt="publish" name="upload icon">
                    <input class="buttonIcon" onclick="window.location.href = '/deleteSurvey/<%= survey.code %>';" type="image" src="icons/trash.png" alt="delete" name="delete icon">
                </div>
                <br>
            <% }); %>

            <!-- Add survey button -->
            <input class="largeButtonIcon" onclick="window.location.href = '/createSurvey'; "type="image"  src="icons/add.png" alt="create survey" name="add icon">

        </div>
        
        <div class="grid-item">
            <h1><u>Active Surveys</u></h1>

            <!-- Published surveys -->
            <% data.publishedSurveys.forEach(survey => { %>
                <div class="survey">
                    <div class="surveyControls">
                        <label class="surveyCode"><%= survey.code %></label>
                        <label><%= survey.name %></label>
                        <input class="buttonIcon" onclick="window.location.href = '/downloadSurveyData/<%= survey.code %>';" type="image" src="icons/download.png" alt="download" name="download icon">
                        <input class="buttonIcon" onclick="window.location.href = '/push/<%= survey.code %>';" type="image" src="icons/bell-ring.png" alt="push" name="push icon">
                        <input class="buttonIcon" onclick="window.location.href = '/unpublishSurvey/<%= survey.code %>';" type="image" src="icons/x.png" alt="unpublish" name="minus icon">
                    </div>
                    <div class="surveyControls"> 
                        <% if(survey.isFinished) { %>
                            <progress id="progress_bar" value=<%= survey.getProgressPercent() %> max="100"></progress>
                            <img class="buttonIcon" type="image" src="icons/check_bold.png" alt="done">
                        <% } else { %>
                            <progress id="progress_bar" value=<%= survey.getProgressPercent()-10 %> max="100"></progress>
                        <% } %>
                    </div>
                </div>
                <br>
            <% }); %>

        </div>
    </div>
</body>
<footer>
	<p class="attribution">Uicons by <a href="https://www.flaticon.com/uicons">Flaticon</a></p>
</footer>
</html>